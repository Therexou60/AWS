# üöÄ Challenge "Overly Ambitious Security Controls" : R√©solution et Configuration AWS


---

## ‚úÖ Solution 1 : Diagnostiquer et corriger les probl√®mes existants

### üèóÔ∏è √âtapes d√©taill√©es

1. **V√©rifier la configuration du VPC**
   - Acc√©dez √† la console AWS et ouvrez la section "VPC".
   - Confirmez que le VPC contient :
     - Au moins deux sous-r√©seaux : un public (avec une route Internet Gateway) et un priv√©.
     - Une Internet Gateway attach√©e pour permettre les connexions sortantes.
   - V√©rifiez les Route Tables :
     - Les sous-r√©seaux publics doivent avoir une route vers l'Internet Gateway.
     - Les sous-r√©seaux priv√©s doivent utiliser un NAT Gateway pour les connexions sortantes.

2. **Auditer les Security Groups**
   - Identifiez les Security Groups associ√©s aux instances EC2 et au Load Balancer.
   - V√©rifiez les r√®gles d'entr√©e et de sortie :
     - Le Load Balancer doit autoriser les connexions HTTP/HTTPS (ports 80 et 443).
     - Les instances EC2 doivent permettre le trafic depuis le Load Balancer sur le port de l'application (ex. 80 ou 8080).
     - Assurez-vous que les r√®gles sortantes permettent les connexions vers Internet pour t√©l√©charger les d√©pendances.

3. **Examiner les Network ACLs**
   - Acc√©dez aux Network ACLs du VPC et v√©rifiez qu‚Äôelles ne bloquent pas :
     - Le trafic HTTP/HTTPS (ports 80 et 443).
     - Les connexions SSH (port 22) pour les tests administratifs temporaires.

4. **Diagnostiquer l'Auto Scaling Group (ASG)**
   - Confirmez que l‚ÄôASG :
     - Utilise le bon Launch Template ou Launch Configuration.
     - Est associ√© aux sous-r√©seaux appropri√©s (souvent priv√©s).
   - V√©rifiez les politiques de scaling et les √©v√©nements r√©cents pour d√©tecter les erreurs.

5. **Tester le Load Balancer**
   - Assurez-vous que l‚ÄôApplication Load Balancer (ALB) est configur√© correctement :
     - V√©rifiez que les listeners (ports 80/443) sont configur√©s.
     - Confirmez que les groupes cibles (Target Groups) pointent vers les instances EC2 et sont en √©tat "healthy".
     - Testez le DNS de l‚ÄôALB pour voir s‚Äôil redirige correctement les requ√™tes vers les instances.

6. **V√©rifier les logs et la surveillance**
   - Activez les logs ALB et envoyez-les vers un bucket S3.
   - Consultez les m√©triques CloudWatch pour identifier :
     - Les erreurs HTTP 4XX/5XX.
     - Les √©ventuelles pannes des instances EC2.

---

## ‚úÖ Solution 2 : Red√©ploiement de l'application avec des configurations optimales

### üèóÔ∏è √âtapes d√©taill√©es

1. **Cr√©er un VPC avec ses composants essentiels**
   - **VPC** : Cr√©ez un VPC avec un CIDR adapt√© (ex. 10.0.0.0/16).
   - **Subnets** :
     - Un sous-r√©seau public (ex. 10.0.1.0/24) pour le Load Balancer.
     - Un ou plusieurs sous-r√©seaux priv√©s (ex. 10.0.2.0/24) pour les instances EC2.
   - **Route Tables** :
     - Route Table publique avec une route vers l‚ÄôInternet Gateway.
     - Route Table priv√©e avec une route vers un NAT Gateway.

2. **D√©ployer l‚ÄôApplication Load Balancer (ALB)**
   - Cr√©ez un ALB dans le sous-r√©seau public.
   - Configurez les listeners pour HTTP et/ou HTTPS.
   - Associez un Target Group pointant vers les instances EC2 de l‚ÄôASG.

3. **Configurer un Auto Scaling Group (ASG)**
   - Cr√©ez un Launch Template contenant :
     - L‚ÄôAMI de votre application.
     - Le type d‚Äôinstance (ex. t2.micro).
     - Les param√®tres de s√©curit√© (Security Groups).
   - Configurez l‚ÄôASG pour utiliser les sous-r√©seaux priv√©s.
   - D√©finissez des politiques de scaling bas√©es sur les m√©triques CloudWatch (CPU, m√©moire, etc.).

4. **Optimiser les Security Groups**
   - ALB :
     - Autoriser le trafic HTTP/HTTPS depuis "Anywhere" (0.0.0.0/0).
   - Instances EC2 :
     - Autoriser uniquement le trafic depuis l‚ÄôALB sur le port de l‚Äôapplication.

5. **Mettre en place la surveillance et les logs**
   - Configurez CloudWatch Logs pour suivre les erreurs et les performances de l‚ÄôASG.
   - Activez les logs ALB et surveillez les √©v√©nements via CloudTrail.

---

## üîÑ Alternatives et solutions suppl√©mentaires

1. **Utiliser AWS Elastic Beanstalk**
   - Si l'application n'est pas complexe, d√©ployez-la sur Elastic Beanstalk pour simplifier la gestion des composants (VPC, ASG, ALB, etc.).

2. **Activer AWS WAF pour prot√©ger l‚ÄôALB**
   - Ajoutez des r√®gles de s√©curit√© pour bloquer les requ√™tes malveillantes et limiter le trafic.

3. **Mettre en place des tests automatis√©s**
   - Utilisez AWS CodePipeline pour tester automatiquement la configuration √† chaque d√©ploiement.

4. **Utiliser une architecture serverless**
   - Si possible, migrez vers une architecture utilisant AWS Lambda et API Gateway pour r√©duire la d√©pendance aux EC2.

5. **Configurer une protection DDoS**
   - Activez AWS Shield Standard (ou Advanced si n√©cessaire) pour prot√©ger l‚ÄôALB contre les attaques DDoS.


