# üöÄ S√©curisation d'un Application Load Balancer avec AWS WAF



## ‚úÖ Solution 1 : Mise en place d'AWS WAF avec des r√®gles de s√©curit√©

### üèóÔ∏è √âtapes d√©taill√©es

1. **Cr√©er un Web ACL dans AWS WAF**
   - Acc√©dez √† la console AWS et ouvrez le service AWS WAF.
   - S√©lectionnez "Cr√©er un Web ACL".
   - Donnez un nom au Web ACL et choisissez "R√©gional" pour le scope (car nous travaillons avec ALB).
   - S√©lectionnez "Application Load Balancer" comme ressource associ√©e et ajoutez votre ALB.

2. **Ajouter des r√®gles de protection standard**
   - **Utiliser les r√®gles g√©r√©es AWS**
     - Activez "AWS Managed Rules" et ajoutez des r√®gles de protection comme:
       - **Core Rule Set (CRS)** : Prot√®ge contre les menaces web courantes.
       - **SQL Injection Rule Set** : D√©tecte et bloque les attaques SQL Injection.
       - **Cross-Site Scripting (XSS) Rule Set** : Prot√®ge contre les attaques XSS.
       - **Amazon IP Reputation List** : Bloque les adresses IP suspectes.

   - **Cr√©er des r√®gles personnalis√©es**
     - Ajouter des r√®gles sp√©cifiques pour restreindre les acc√®s :
       - Bloquer des requ√™tes en fonction des pays (GeoIP filtering).
       - Mettre en place un **rate limiting** pour limiter les requ√™tes abusives.
       - Filtrer les requ√™tes sur des patterns sp√©cifiques dans l'URL.

3. **Configurer une allow-list pour certaines requ√™tes HTTP**
   - Cr√©ez une nouvelle r√®gle dans AWS WAF.
   - D√©finissez des conditions pour autoriser uniquement certaines adresses IP ou certaines m√©thodes HTTP.
   - Placez cette r√®gle en priorit√© avant les r√®gles de blocage.

4. **Appliquer le Web ACL √† l'ALB**
   - Aller dans AWS EC2 ‚Üí Load Balancers.
   - S√©lectionner l'ALB concern√©.
   - Aller dans l'onglet "Web ACL" et attacher le Web ACL cr√©√©.

5. **Activer les logs et la surveillance**
   - Configurez AWS WAF Logging pour envoyer les logs vers Amazon S3 ou CloudWatch.
   - Analysez les logs pour ajuster les r√®gles en fonction du trafic re√ßu.

---

## üõ†Ô∏è Solution 2 : S√©curisation avanc√©e avec Security Groups et ALB Rules

### üèóÔ∏è √âtapes d√©taill√©es

1. **Restreindre l'acc√®s avec Security Groups**
   - Acc√©dez √† la console AWS et ouvrez le service EC2.
   - S√©lectionnez l'instance ou l'ALB et modifiez les Security Groups associ√©s.
   - Appliquez les restrictions suivantes :
     - Autoriser uniquement le trafic HTTP/HTTPS (ports 80 et 443).
     - Restreindre les acc√®s par IP pour limiter les connexions non autoris√©es.
     - V√©rifier que les instances EC2 ne sont accessibles que depuis l‚ÄôALB.

2. **Configurer des r√®gles avanc√©es sur l'ALB**
   - Aller dans la console AWS EC2 ‚Üí Load Balancers.
   - S√©lectionner l'ALB et aller dans l‚Äôonglet "Listeners".
   - Ajouter des r√®gles pour :
     - Rediriger HTTP vers HTTPS.
     - Bloquer les requ√™tes malform√©es ou suspectes.
     - Appliquer du **rate limiting** pour limiter les attaques par force brute.

3. **Activer AWS Shield Standard pour protection DDoS**
   - AWS Shield est automatiquement activ√© sur AWS WAF et ALB.
   - V√©rifiez qu‚Äôil est bien actif via AWS Shield Dashboard.

4. **Configurer AWS CloudWatch et GuardDuty pour surveillance continue**
   - Activer **AWS CloudWatch Logs** pour suivre les √©v√©nements WAF et ALB.
   - Utiliser **Amazon GuardDuty** pour d√©tecter les comportements suspects et recevoir des alertes.

---

## üîÑ Alternatives et solutions suppl√©mentaires

1. **Utiliser AWS Firewall Manager** pour une gestion centralis√©e des r√®gles WAF sur plusieurs ALB.
2. **Mettre en place AWS Shield Advanced** pour une protection renforc√©e contre les attaques DDoS.
3. **Activer AWS Config Rules** pour s‚Äôassurer que les meilleures pratiques de s√©curit√© sont appliqu√©es.
4. **Utiliser AWS Lambda pour automatiser la r√©ponse aux attaques d√©tect√©es**.
